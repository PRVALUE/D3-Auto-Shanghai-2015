<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <link rel="stylesheet" type="text/css" href="css/style.css"/>
    <script type="text/javascript" src="js/d3.js"></script>
    <link rel="stylesheet" href="css/my-css.css" media="screen" type="text/css" />
</head>

<body>
    <br></br>
    <div class="p2title_">
        <p>微博最活跃账号（2015 VS 2014）</p>
    </div>

    <br>
    <div class="p7title">
        <strong><p>-最活跃媒体微博-  TOP10</p></strong>
    </div>
<script type="text/javascript">
    var data = [ // <-A
        {num:1, expense: 192, category: "太平洋汽车"},
        {num:2, expense: 124, category: "易车网"},
        {num:3, expense: 115, category: "汽车周刊"},
        {num:4, expense: 114, category: "人民网"},
        {num:5, expense: 112, category: "新浪汽车"},
        {num:6, expense: 94, category: "中国汽车报"},
        {num:7, expense: 90, category: "中国经营报"},
        {num:8, expense: 89, category: "汽车点评网"},
        {num:9, expense: 76, category: "新京报"},
        {num:10, expense: 68, category: "重庆晚报"}
    ];
    function render(data, category) {
        var div = d3.select("body").selectAll("div.h-bar") // <-B
                .data(data)
                .enter()
                .append("div")
                    .attr("class", "h-bar");
        div.append("span")
            .attr("class","number");
        div.append("span")
            .attr("class","left");
        div.append("span")
            .attr("class","right");
        d3.select("body").selectAll("div.h-bar") // <-C
                .data(data)
            .exit().remove();

        my_data = d3.select("body").selectAll("div.h-bar") // <-D
                .data(data)
            .attr("class", "h-bar")
            .style("width", function (d) {
                return (d.expense * 1) + "px";}
            );
            my_data.select("span")
                .text(function (d) {
                    return d.num;
                });
            my_data.select("span.left")
                .text(function (d) {
                    return d.category;
                });
            my_data.select("span.right")
                .text(function (d) {
                    return d.expense;
                });
        d3.select("body").selectAll("div.h-bar")
                .filter(function (d, i) { // <-E
                    return d.category == category;
                })
                .classed("selected", true);
    }
    render(data);
/*    
    function select(category) {
        render(data, category);
    }
*/
</script>
<!--
<div class="control-group">
    <button onclick="select('新浪汽车')">
        新浪汽车
    </button>
    <button onclick="select('太平洋汽车')">
        太平洋汽车
    </button>
    <button onclick="select('汽车之家')">
        汽车之家
    </button>
</div>
-->
</body>

</html>